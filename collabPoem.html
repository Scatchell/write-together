<head>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<title>collabPoem</title>
</head>

<body>
    {{> header }}
    <div class="container">
    <div class="row">
        <h1>Collaboratively create a poem!</h1>
        <div id="poem-table" class="col s7">
                {{#each lines}}
                    <div class="row">
                            {{#if currentUser}}
                                <div class="col s1">
                                    {{> replacementLine}}
                                </div>
                            {{/if}}
                        <div class="col s11">
                            <div id="replacement-line-{{index}}" class="row replacement-line">
                                <div class="col s12">
                                    <div id="input-field-row" class="row">
                                    <div class="input-field col s11">
                                        <input id="replacement-line-text-{{index}}" class="replacement-line-text" type="text">
                                        <label for="replacement-line-text-{{index}}">Enter suggested replacement line here...</label>
                                    </div>
                                    <div id="add-replacement-line" class="col s1">
                                        <a id="add-replacement-line-link" href="#">
                                            <i class="material-icons">add</i>
                                        </a>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            {{> line}}
                        </div>
                    </div>
                {{/each}}

                {{#if currentUser}}
                <div id="new-line" class="row">
                    <div class="input-field col s11">
                        <input id="new-line-text" type="text">
                        <label for="new-line-text">Add next line here...</label>
                    </div>
                    <a id="add-new-line-link" class="btn-floating btn waves-effect waves-light green">
                        <i class="material-icons">add</i>
                    </a>
                </div>
                {{/if}}
        </div>

        {{> examplePoems}}
    </div>

    </div>

</body>

<template name="line">
    <div class="main-line row">
        <div class="line-text col s8">{{text}}</div>
        <div id="line-meta-data" class="col s4">
            <span id="extra-info" class="right">
                <span class="remove">
                    <a href="#"><i class="material-icons">delete</i></a>
                </span>
                {{#if isAlternative}}
                    <span class="favorite-up right">
                        <a href="#">+ ({{favorites}})</a>
                    </span>
                {{/if}}
                <span class="line-user">({{userName}})</span>
            </span>
        </div>
    </div>

    {{#unless isAlternative}}
        <div class="alternative-lines">
            {{#each alternatives}}
            {{>line }}
            {{/each}}
        </div>
    {{/unless}}
</template>

<template name="replacementLine">
    <div class="replace-line">
        <a href="#"><i class="material-icons">swap_horiz</i></a>
    </div>
</template>

<template name="header">
    <header>
        <nav class="green">
            <ul class="right hide-on-med-and-down">
                <li>
                    {{> userSignIn }}
                </li>
                <li><a data-activates="slide-out" id="side-menu" class="button-collapse show-on-large" href="#!">Show some poem suggestions...</a></li>
            </ul>
            <ul id="slide-out" class="side-nav">
                <li><a id="poem-1-title" href="#!">Stopping by Woods on a Snowy Evening: Robert Frost</a></li>
                <li><a id="poem-2-title" href="#!">Be Glad Your Nose is on Your Face: Jack Prelutsky</a></li>
                <li><a id="clear-all-poem-examples" href="#!">(Clear all examples)</a></li>
            </ul>
        </nav>
    </header>
</template>

<template  name="userSignIn">
    {{#unless currentUser}}
    <li>
        <div id="sign-in-reminder" class="col card-panel orange valign-wrapper">
            <span class="white-text valign">
                Sign in or quickly create an account with the link to the right to be able to add a line! >>
            </span>
        </div>
    </li>
    {{/unless}}
    <li>
        <div >{{> loginButtons }}</div>
    </li>
</template>
