<head>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<title>collabPoem</title>
</head>

<!--TODO remove tooltips-->

<body>
    <div class="container">
        <h1>Collaboratively create a poem!</h1>

        <div class="row">
            {{#unless currentUser}}
                <div id="sign-in-reminder" class="col card-panel orange valign-wrapper">
                   <span class="white-text valign">
                        Sign in or quickly create an account with the link below to be able to add a line!
                    </span>
                </div>
            {{/unless}}
            <div class="col s12">{{> loginButtons }}</div>
        </div>

        <div id="poem-table">
                {{#each lines}}
                    <div class="row">
                            {{#if currentUser}}
                                <div class="col s1">
                                    {{> replacementLine}}
                                </div>
                            {{/if}}
                        <div class="col s11">
                            <div id="{{_id}}" class="row replacement-line">
                                <div class="col s12">
                                    <div id="input-field-row" class="row">
                                    <div class="input-field col s11">
                                        <input id="{{_id}}" class="replacement-line-text" type="text">
                                    </div>
                                    <div id="add-replacement-line" class="col s1">
                                        <a id="add-replacement-line-link" href="#">
                                            <i class="material-icons">add</i>
                                        </a>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            {{> line}}
                        </div>
                    </div>
                {{/each}}
        </div>

        {{#if currentUser}}
        <div id="new-line" class="row">
            <div class="input-field col s6">
                Next line: <input id="new-line-text" type="text">
            </div>
            <a id="add-new-line-link" class="btn-floating btn waves-effect waves-light green">
                <i class="material-icons">add</i>
            </a>
        </div>
        {{/if}}
    </div>
</body>

<template name="line">
    <div class="main-line row">
        <div class="line-text col s9">{{text}}</div>
        <div id="line-meta-data" class="col s3">
            {{#if isAlternative}}
                <span class="favorite-up right">
                    <a href="#">+ ({{favorites}})</a>
                </span>
            {{/if}}
            <span class="line-user right">({{userName}})</span>
        </div>
    </div>

    {{#unless isAlternative}}
        <div class="alternative-lines">
            {{#each alternatives}}
            {{>line }}
            {{/each}}
        </div>
    {{/unless}}
</template>

<template name="replacementLine">
    <div class="replace-line">
        <a href="#"><i class="material-icons">swap_horiz</i></a>
    </div>
</template>

